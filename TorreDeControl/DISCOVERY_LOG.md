# Discovery Log - Bitácora de Hallazgos QAI

> **Propósito**: Señal de alto ancho de banda para Nzero.
> **Regla**: Solo documentar hallazgos/decisiones NUEVAS e IMPORTANTES. No chat logs completos.
> **Formato**: `- [Fecha] [Agente]: [Resumen] -> [Link a Artifact/Detalle]`

---

- [2025-12-27] [Nzero]: Arquitectura de Memoria Compartida implementada. Se decidió usar este Log como señal + Artifacts curados, evitando logs de chat crudos. -> [Ver Plan](file:///c:/Users/abustamante/TheQaiCo/TorreDeControl/DISCOVERY_LOG.md)
- [2025-12-27] [Lex]: Guía de facturación de servicios SaaS extranjeros (B2B) creada. -> [Ver Guía](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/lex/knowledge_base/guia_facturacion_saas_extranjero.md)
- [2025-12-29] [Nzero]: Implementación de FinOps Agnóstico. La clave es la categorización triple (Fijo/Proyecto/R&D) para mantener el burn rate de Innovación separado del COGS de productos. -> [Ver ADR-009](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/nzero/knowledge_base/design_decisions/009_finops_agnostic_strategy.md)
- [2025-12-29] [Nzero]: El fallback de "sumar line items" es una estrategia de alta confiabilidad para POs de FedEx cuando el total está oculto o mal formateado.
- [2025-12-29] [Nzero]: **La Trampa de los Metadatos**: El olvido de fechas y estados de rama rompe la confianza multi-agente. Solución: Regla de los 4 Puntos.
- [2025-12-29] [Nzero]: **Confusión de Ejecución de Tools**: Los agentes pueden confundir "código de ejemplo" con "herramientas nativas". Si un agente no tiene REPL de Python, se bloquea al ver `import`. Solución: Mandante de **Terminal Fallback** (CLI) explícito en el System Prompt.
- [2025-12-29] [Nzero]: **Principio de Autonomía de Dependencias**: Un agente "educado" pierde tiempo preguntando por instalaciones básicas. Solución: Dar **autorización explícita** para instalar librerías declaradas en `requirements.txt` de forma autónoma.
- [2025-12-30] [Nzero]: **Blindaje de Entorno & Portabilidad**: El HQ debe ser portable. Usar rutas absolutas estabiliza el local hoy, pero usar **Root-Aware Paths** (relativos al root `TheQaiCo`) garantiza que el sistema funcione al clonarlo en otra máquina.
- [2025-12-30] [Nzero]: **PCA (Protocolo de Cierre Autónomo)**: La documentación no es opcional ni reactiva. Se establece como regla mandatoria sincronizar STATUS, INBOX y LOGS antes de notificar al usuario. -> [Ver ADR-010](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/nzero/knowledge_base/design_decisions/010_mission_closing_protocol.md)
- [2026-01-20] [Lex]: **Libros Digitales sin Timbraje**: Validado que una SpA puede llevar libros 100% digitales amparados en la Ley 19.799. El sellado de tiempo (timestamp) de la FEA reemplaza la necesidad de timbraje previo en notaría. -> [Ver Protocolo](../Empresa/04_LEGAL/PROTOCOLO_LIBROS_DIGITALES.md)
- [2026-01-21] [Nzero]: Workflow de propuestas institucionalizado (Deck + PDF + Email preview HITL) con templates SSOT y comandos CLI portables (`qrun.bat`). -> [Guía](../Empresa/02_COMERCIAL/templates/PROPOSAL_SYSTEM.md)
- [2026-01-21] [Nzero]: Restricción práctica: VS Code Simple Browser requiere HTTP/HTTPS (no `file://`) para previews; workaround estable: `python -m http.server` + URL local. -> [Guía](../Empresa/02_COMERCIAL/templates/PROPOSAL_SYSTEM.md)
- [2026-01-21] [Nzero]: Logo oficial existente tenía fondo blanco “hard” (sin alpha útil); se generó variante transparente y se configuró fallback automático en herramientas para evitar ruido visual sobre fondos. -> [Brand Kit](../Empresa/01_ESTRATEGIA/IDENTIDAD_VISUAL/BRAND_KIT_MINIMO_QAI.md)
- [2026-01-23] [Nzero]: Breakthrough en renderizado PDF: Playwright requiere sincronización explícita (`document.fonts.ready`) para no perder iconos de Google Fonts. El formato 16:9 sin bordes se logra forzando `width/height` y `scale: 1.0` en el comando PDF, invalidando el reescalado automático del navegador.
- [2026-01-24] [Nzero]: **Ingeniería de Email High-Fidelity**: El envío de logos inline requiere una estructura MIME `multipart/related` vinculada por `Content-ID`. Si se usa el contenedor raíz `multipart/mixed`, Gmail trata los logos como adjuntos sueltos, rompiendo el diseño.
- [2026-01-24] [Nzero]: **Trampa del Cross-Origin Preview**: Los navegadores modernos bloquean recursos `file://` (como logos locales) cuando el HTML se carga vía `http://localhost`. Para una validación HITL exacta, el script de preview debe inyectar la URL del servidor local, no el path del sistema de archivos.- [2026-02-10] [Lex]: **Registro de Accionistas RES: Autenticación = Firma Legal**: El Registro de Accionistas en el portal RES NO requiere firma electrónica adicional sobre el PDF de comprobante. La autenticación con Clave Única al momento de abrir el libro ES el acto legal válido. El PDF con marca de agua "borrador" es solo un comprobante informativo para archivo personal. El registro oficial vive en el sistema RES y se valida con el CVE generado.