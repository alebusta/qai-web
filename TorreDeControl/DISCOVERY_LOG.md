# Discovery Log - BitÃ¡cora de Hallazgos QAI

> **PropÃ³sito**: SeÃ±al de alto ancho de banda para Nzero.
> **Regla**: Solo documentar hallazgos/decisiones NUEVAS e IMPORTANTES. No chat logs completos.
> **Formato**: `- [Fecha] [Agente]: [Resumen] -> [Link a Artifact/Detalle]`

---

- [2025-12-27] [Nzero]: Arquitectura de Memoria Compartida implementada. Se decidiÃ³ usar este Log como seÃ±al + Artifacts curados, evitando logs de chat crudos. -> [Ver Plan](file:///c:/Users/abustamante/TheQaiCo/TorreDeControl/DISCOVERY_LOG.md)
- [2025-12-27] [Lex]: GuÃ­a de facturaciÃ³n de servicios SaaS extranjeros (B2B) creada. -> [Ver GuÃ­a](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/lex/knowledge_base/guia_facturacion_saas_extranjero.md)
- [2025-12-29] [Nzero]: ImplementaciÃ³n de FinOps AgnÃ³stico. La clave es la categorizaciÃ³n triple (Fijo/Proyecto/R&D) para mantener el burn rate de InnovaciÃ³n separado del COGS de productos. -> [Ver ADR-009](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/nzero/knowledge_base/design_decisions/009_finops_agnostic_strategy.md)
- [2025-12-29] [Nzero]: El fallback de "sumar line items" es una estrategia de alta confiabilidad para POs de FedEx cuando el total estÃ¡ oculto o mal formateado.
- [2025-12-29] [Nzero]: **La Trampa de los Metadatos**: El olvido de fechas y estados de rama rompe la confianza multi-agente. SoluciÃ³n: Regla de los 4 Puntos.
- [2025-12-29] [Nzero]: **ConfusiÃ³n de EjecuciÃ³n de Tools**: Los agentes pueden confundir "cÃ³digo de ejemplo" con "herramientas nativas". Si un agente no tiene REPL de Python, se bloquea al ver `import`. SoluciÃ³n: Mandante de **Terminal Fallback** (CLI) explÃ­cito en el System Prompt.
- [2025-12-29] [Nzero]: **Principio de AutonomÃ­a de Dependencias**: Un agente "educado" pierde tiempo preguntando por instalaciones bÃ¡sicas. SoluciÃ³n: Dar **autorizaciÃ³n explÃ­cita** para instalar librerÃ­as declaradas en `requirements.txt` de forma autÃ³noma.
- [2025-12-30] [Nzero]: **Blindaje de Entorno & Portabilidad**: El HQ debe ser portable. Usar rutas absolutas estabiliza el local hoy, pero usar **Root-Aware Paths** (relativos al root `TheQaiCo`) garantiza que el sistema funcione al clonarlo en otra mÃ¡quina.
- [2025-12-30] [Nzero]: **PCA (Protocolo de Cierre AutÃ³nomo)**: La documentaciÃ³n no es opcional ni reactiva. Se establece como regla mandatoria sincronizar STATUS, INBOX y LOGS antes de notificar al usuario. -> [Ver ADR-010](file:///c:/Users/abustamante/TheQaiCo/QaiCore/agents/nzero/knowledge_base/design_decisions/010_mission_closing_protocol.md)
- [2026-01-20] [Lex]: **Libros Digitales sin Timbraje**: Validado que una SpA puede llevar libros 100% digitales amparados en la Ley 19.799. El sellado de tiempo (timestamp) de la FEA reemplaza la necesidad de timbraje previo en notarÃ­a. -> [Ver Protocolo](../Empresa/04_LEGAL/PROTOCOLO_LIBROS_DIGITALES.md)
- [2026-01-21] [Nzero]: Workflow de propuestas institucionalizado (Deck + PDF + Email preview HITL) con templates SSOT y comandos CLI portables (`qrun.bat`). -> [GuÃ­a](../Empresa/02_COMERCIAL/templates/PROPOSAL_SYSTEM.md)
- [2026-01-21] [Nzero]: RestricciÃ³n prÃ¡ctica: VS Code Simple Browser requiere HTTP/HTTPS (no `file://`) para previews; workaround estable: `python -m http.server` + URL local. -> [GuÃ­a](../Empresa/02_COMERCIAL/templates/PROPOSAL_SYSTEM.md)
- [2026-01-21] [Nzero]: Logo oficial existente tenÃ­a fondo blanco â€œhardâ€ (sin alpha Ãºtil); se generÃ³ variante transparente y se configurÃ³ fallback automÃ¡tico en herramientas para evitar ruido visual sobre fondos. -> [Brand Kit](../Empresa/01_ESTRATEGIA/IDENTIDAD_VISUAL/BRAND_KIT_MINIMO_QAI.md)
- [2026-01-23] [Nzero]: Breakthrough en renderizado PDF: Playwright requiere sincronizaciÃ³n explÃ­cita (`document.fonts.ready`) para no perder iconos de Google Fonts. El formato 16:9 sin bordes se logra forzando `width/height` y `scale: 1.0` en el comando PDF, invalidando el reescalado automÃ¡tico del navegador.
- [2026-01-24] [Nzero]: **IngenierÃ­a de Email High-Fidelity**: El envÃ­o de logos inline requiere una estructura MIME `multipart/related` vinculada por `Content-ID`. Si se usa el contenedor raÃ­z `multipart/mixed`, Gmail trata los logos como adjuntos sueltos, rompiendo el diseÃ±o.
- [2026-01-24] [Nzero]: **Trampa del Cross-Origin Preview**: Los navegadores modernos bloquean recursos `file://` (como logos locales) cuando el HTML se carga vÃ­a `http://localhost`. Para una validaciÃ³n HITL exacta, el script de preview debe inyectar la URL del servidor local, no el path del sistema de archivos.
- [2026-02-10] [Lex]: **Registro de Accionistas RES: AutenticaciÃ³n = Firma Legal**: El Registro de Accionistas en el portal RES NO requiere firma electrÃ³nica adicional sobre el PDF de comprobante. La autenticaciÃ³n con Clave Ãšnica al momento de abrir el libro ES el acto legal vÃ¡lido.
- [2026-02-11] [Nzero]: **Scopes de GitHub PAT**: Los tokens Fine-grained requieren el permiso explÃ­cito `Contents: Read and write` para permitir al bot actualizar archivos (INBOX.md). El error `403 Forbidden` indica falta de este permiso.
- [2026-02-11] [Nzero]: **Scope de Drive Write**: Para organizar carpetas existentes (no creadas por el bot), se requiere el scope `https://www.googleapis.com/auth/drive` completo. El scope `drive.file` es insuficiente. SoluciÃ³n: Script de Auth Unificada en `QaiCore/scripts/auth_unified.py`.
- [2026-02-12] [Lex]: Proceso completo de re-aplicaciÃ³n de patente municipal en Providencia documentado. Incluye flujo de rechazo â†’ correcciÃ³n â†’ nueva solicitud, templates de Carta Aclaratoria (9 puntos) y DeclaraciÃ³n Jurada, enlaces a portales municipales y SII. -> [Ver Plantillas](../QaiCore/agents/lex/knowledge_base/plantillas_patente_municipal.md)- [2026-02-13] [Nzero]: **Triangulación de Inteligencia OSINT**: Validado el método de cruce de datos Gremio/Prensa/LinkedIn para confirmar actividad (50% éxito) incluso con perfiles privados de LinkedIn. Propuesta graduada a Área 51 como servicio de Prospección Inteligente. -> [Knowledge Base](../Empresa/01_ESTRATEGIA/KNOWLEDGE_BASE_PROSPECCION_IA.md)
